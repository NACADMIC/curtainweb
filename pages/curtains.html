<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>커튼 - 유명커튼블라인드</title>
    <link rel="stylesheet" href="../css/style.css">
    <style>
        .page-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        .page-title {
            text-align: center;
            margin-bottom: 40px;
            color: #333;
        }
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
        }
        .product-card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: transform 0.3s;
        }
        .product-card:hover {
            transform: translateY(-5px);
        }
        .product-card img {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }
        .product-info {
            padding: 20px;
        }
        .product-info h3 {
            margin: 0 0 10px 0;
            color: #333;
        }
        .product-info p {
            color: #666;
            margin-bottom: 10px;
        }
        .price {
            font-size: 1.2em;
            color: #4CAF50;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <h1><a href="../index.html" class="logo-text">유명커튼블라인드</a></h1>
            <nav>
                <ul class="nav-menu">
                    <li><a href="curtains.html">커튼</a></li>
                    <li><a href="blinds.html">블라인드</a></li>
                    <li><a href="portfolio.html">시공사례</a></li>
                    <li><a href="contact.html">상담신청</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="page-content">
        <h2 class="page-title">커튼 컬렉션</h2>
        <div class="product-grid" id="productGrid">
            <p style="text-align: center; width: 100%;">로딩 중...</p>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 유명커튼블라인드. All rights reserved.</p>
        </div>
    </footer>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script>
        // Firebase 설정
        const firebaseConfig = {
            apiKey: "AIzaSyCM8IflmHHgMaFseEoPPsECsLxsSAjj1Vw",
            authDomain: "curtainweb.firebaseapp.com",
            projectId: "curtainweb",
            storageBucket: "curtainweb.firebasestorage.app",
            messagingSenderId: "1004027071653",
            appId: "1:1004027071653:web:f29be419700c6302b6114c"
        };
        
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // 커튼 제품 로드
        async function loadProducts() {
            console.log('커튼 제품 로딩 시작...');
            try {
                const snapshot = await db.collection('products').where('category', '==', 'curtain').get();
                const productGrid = document.getElementById('productGrid');
                productGrid.innerHTML = '';
                
                if (snapshot.empty) {
                    productGrid.innerHTML = '<p style="text-align: center; width: 100%; color: #888;">등록된 커튼 제품이 없습니다.</p>';
                    console.log('커튼 제품 없음');
                    return;
                }
                
                console.log('커튼 제품 수:', snapshot.size);
                
                snapshot.forEach(doc => {
                    const product = doc.data();
                    const card = document.createElement('div');
                    card.className = 'product-card';
                    card.innerHTML = `
                        <img src="${product.imageUrl || 'https://images.pexels.com/photos/1743227/pexels-photo-1743227.jpeg'}" alt="${product.name}">
                        <div class="product-info">
                            <h3>${product.name}</h3>
                            <p>${product.description || '프리미엄 커튼'}</p>
                            <span class="price">${product.price ? product.price.toLocaleString() + '원' : '견적 문의'}</span>
                        </div>
                    `;
                    productGrid.appendChild(card);
                });
                
                console.log('커튼 제품 로딩 완료');
            } catch (error) {
                console.error('제품 로드 실패:', error);
                document.getElementById('productGrid').innerHTML = '<p style="text-align: center; width: 100%; color: red;">제품을 불러올 수 없습니다.</p>';
            }
        }

        loadProducts();
    </script>
</body>
</html>
