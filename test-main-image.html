<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë©”ì¸ ì´ë¯¸ì§€ í…ŒìŠ¤íŠ¸</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        #mainImage { max-width: 800px; width: 100%; height: 400px; object-fit: cover; border: 3px solid #333; }
        .log { background: #f5f5f5; padding: 10px; margin: 10px 0; border-left: 4px solid #4CAF50; }
        .error { border-left-color: #f44336; }
    </style>
</head>
<body>
    <h1>ğŸ” ë©”ì¸ ì´ë¯¸ì§€ ë¡œë”© í…ŒìŠ¤íŠ¸</h1>
    
    <h2>í˜„ì¬ ì´ë¯¸ì§€:</h2>
    <img id="mainImage" src="https://images.pexels.com/photos/1082355/pexels-photo-1082355.jpeg" alt="í…ŒìŠ¤íŠ¸">
    
    <h2>ë¡œê·¸:</h2>
    <div id="logs"></div>
    
    <button onclick="location.reload()" style="padding: 10px 20px; margin-top: 20px;">ìƒˆë¡œê³ ì¹¨</button>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script>
        const logsDiv = document.getElementById('logs');
        
        function log(message, isError = false) {
            console.log(message);
            const div = document.createElement('div');
            div.className = isError ? 'log error' : 'log';
            div.textContent = message;
            logsDiv.appendChild(div);
        }

        log('1. í˜ì´ì§€ ë¡œë“œ ì‹œì‘...');

        const firebaseConfig = {
            apiKey: "AIzaSyCM8IflmHHgMaFseEoPPsECsLxsSAjj1Vw",
            authDomain: "curtainweb.firebaseapp.com",
            projectId: "curtainweb",
            storageBucket: "curtainweb.firebasestorage.app",
            messagingSenderId: "1004027071653",
            appId: "1:1004027071653:web:f29be419700c6302b6114c"
        };
        
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        
        log('2. âœ… Firebase ì´ˆê¸°í™” ì™„ë£Œ');

        async function loadMainImage() {
            log('3. ë©”ì¸ ì´ë¯¸ì§€ ë¡œë”© ì‹œì‘...');
            
            try {
                const snapshot = await db.collection('main-images').get();
                log(`4. Firebase ì‘ë‹µ: ${snapshot.size}ê°œì˜ ì´ë¯¸ì§€ ë°œê²¬`);
                
                if (snapshot.empty) {
                    log('5. âŒ Firebaseì— ë“±ë¡ëœ ë©”ì¸ ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤!', true);
                    log('   â†’ /admin/main-images.html ì—ì„œ ì´ë¯¸ì§€ë¥¼ ë“±ë¡í•˜ì„¸ìš”.', true);
                    return;
                }
                
                const image = snapshot.docs[0].data();
                log(`5. ì´ë¯¸ì§€ ë°ì´í„°: ${JSON.stringify(image)}`);
                
                const img = document.getElementById('mainImage');
                
                if (!img) {
                    log('6. âŒ ì´ë¯¸ì§€ ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!', true);
                    return;
                }
                
                if (!image.imageUrl) {
                    log('6. âŒ imageUrlì´ ì—†ìŠµë‹ˆë‹¤!', true);
                    return;
                }
                
                log(`6. ì´ë¯¸ì§€ URL: ${image.imageUrl}`);
                log('7. ì´ë¯¸ì§€ ë³€ê²½ ì‹œë„...');
                
                img.src = image.imageUrl;
                
                log('8. âœ…âœ…âœ… ë©”ì¸ ì´ë¯¸ì§€ ë³€ê²½ ì™„ë£Œ! âœ…âœ…âœ…');
                log(`   ìƒˆ ì´ë¯¸ì§€ ì£¼ì†Œ: ${img.src}`);
                
            } catch (error) {
                log(`âŒ ì˜¤ë¥˜ ë°œìƒ: ${error.message}`, true);
                log(`   ìƒì„¸: ${error}`, true);
            }
        }

        // 1ì´ˆ í›„ ì‹¤í–‰
        setTimeout(() => {
            loadMainImage();
        }, 1000);
    </script>
</body>
</html>

